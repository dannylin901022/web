<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
        
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        
        <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
        
        <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

	  <script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
  	  <script src="https://cdn.anychart.com/releases/v8/js/anychart-tag-cloud.min.js"></script>
        
      <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.js"></script>
        
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        
        <link rel="stylesheet" href="./css/style.css">
        <link rel="stylesheet" href="./css/nav.css">
        <link rel="stylesheet" href="./css/loader_style.css">

        <script src="./js/nav.js"></script>
        
        <script src="./js/loader_function.js"></script>
        
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;500&display=swap" rel="stylesheet">
        
        
        <title>index</title>
        
        <style type="text/css">
            .jumbotron {
                padding: 4rem 2rem;
                margin-bottom: 2rem;
                border-radius: .3rem;  
            }
        </style>
    </head>
<body onload="search()" style="margin:0;">
        <div style="height: 50px;background-color:#2D232E;"></div>
        <div id="all_body" style="height: 100%;margin-top:-50px;">
        <div class="container-all">
        <div id="c_left" class="container-left">
            <nav id="siderbar">
                <div style="height: 50px; background-color:#2D232E;">
                        <button type="button" id="collapse" class="collapse-btn"  style="margin-left: 210px;margin-top: 10px; border: none; font-size: 30px;background-color:#2D232E;">
                            <i class="fa-solid fa-bars" style="color: white;"></i>
                        </button>
                </div>
                <div style="display: flex" onclick="home()">
                    <a href="#" style=" margin: auto;margin-top: 20px;"><img src="logo.png" style="height: 150px;"></a>
                    </div>
                
                <ul class="list-unstyled" style="margin-top:30px; text-align: center">                 
                    <li>
                        <hr class="hr">
                        <a href="#" onclick="home()" class="nav_li">首頁</a>
                    </li>
                    <li>
                        <a href="#" onclick="result()" class="nav_li" @click="search_btn">搜尋結果</a>
                    </li>
                    <li>
                        <a href="#" onclick="news()" class="nav_li" @click="news_btn">最新消息</a>
                    </li>
                    <li>
                        <a href="#" class="nav_li">關於我們(暫留)</a>
                    </li>
                    <li>
                        <a href="#sublist" data-bs-toggle="collapse" id="dropdown" class="collapsed" aria-expanded="false">登入/註冊</a>
                        <ul id="sublist" class="list-unstyled collapse nav_li">
                            <li>
                                <a href="#" id="dropdown_login" onclick="login()" style="text-decoration: none;font-size: 16px;">登入</a>
                            </li>
                            <li>
                                <a href="#" id="dropdown_register" onclick="register()" style="text-decoration: none;font-size: 16px;">註冊</a>
                            </li>
                        </ul>
                    </li>
                    <li>
                        <a href="#" id="user_collection" class="nav_li" onclick="collection()" style="display: none;" @click="collect_btn">收藏列表</a>
                    </li>
                    <li>
                        <p id="user_account" class="nav_li" style="display: none;">使用者：{{account_input}}</p>
                    </li>
                    <li>
                        <a href="#" id="logout" class="nav_li" style="display: none;" @click="logout_btn">登出</a>
                    </li>
                </ul>
            </nav>
        </div>
    
        <div class="container-right" style="margin:0px auto;display: flex; justify-content: center; align-items: center;">
        <div id="loader"></div>          
        <div class="container-fluid">
        <section id="search" class="animate-bottom" style="display: none" >
            <div class='jumbotron'>
            <div class='container'>
            <div class='row'>
                <div class='col-md-12'>
                    <h1>情緒分析應用於社群論壇之文件探勘</h1>
                    <p>輸入關鍵字以產生分析結果</p>
                    <div style="display:flex; flex-direction:column; justify-content:center;" >
                        <input type="text" id="search_box" style="margin-top:20px;height: 50px; width:75%;font-size:30px;">
                        <div style="display: flex;align-content: center;margin-top: 20px;">
                            <p style="text-align:center">開始時間：</p>
                            <input type="date" id="search_start" style="height: 20px;">
                            <p style="text-align:center;margin-left: 40px;">結束時間：</p>
                            <input type="date" id="search_end" style="height: 20px;">
                        </div>
				        <button type="button" style="margin-top:20px; height:50px; width:125px; border: 1px solid; border-radius:25px; background-color:white;" @click="search_btn" onclick="result()">搜尋</button>
                    </div>
                    <div style="margin-top:30px;">
                        <h3>熱門文章</h3>
                        <div style="border: 1px solid;height: 40px" v-model="recommend_info">
                            <p style="margin-top: 10px;">{{recommend_info}}</p>
                        </div>
                    </div>
                </div>
            </div>
            </div>
            </div>
        </section>
        <section id="result" class="animate-bottom" style="display: none;margin-top: -100%">
            <div class='jumbotron'>
            <div class='container'>
            <div class='row'>
            <div class='col-md-12' >
			<div>
                <h1>{{search_input.topic}}</h1>
				<div style="display:flex;">
				<div style="display:flex;flex-direction:column;">
                    <div style="border:1px solid;height:35vh;width:100vh">
                        <p v-for="item in result_text">帳號：{{item.account}} 密碼：{{item.password}}</p>
<!--                        <p>摘要</p>-->
					</div>
				</div>
				<div style="display:flex-warp;flex-direction:column;">
                    <div style="display:flex;margin-left:30px;">
					   <button type="button" class="summary_btn"><i class="fa-solid fa-thumbs-up" style="margin-left:0;"></i></button>
					   <button type="button" class="summary_btn"><i class="fa-solid fa-thumbs-down"></i></button>
					   <button type="button" class="summary_btn"><i class="fa-solid fa-heart"></i></button>
                        <button type="button" class="summary_btn" style="font-size: 10;width: 70px">相關連結</button>
				    </div>
                    <div style="border:1px solid; border-radius:50px; height:10vh;width:36vh;margin-left:30px;margin-top:4vh;display:flex;justify-content:center;align-items:center;flex-direction:column;">
                        正負項資料筆數
                    </div>
					<div style="border:1px solid; border-radius:50px; height:10vh;width:36vh;margin-left:30px;margin-top:4vh;display:flex;justify-content:center;align-items:center;flex-direction:column;">
                        GPT分數
					</div>
                    
                    
                <div>
                </div>
            </div> 	
            </div>
            </div>
                <div style="height:50%;width:70%;margin-top:30px;">
						<canvas id="bar_chart"></canvas>	
					</div>
                <hr style="margin-top:-100px;margin-bottom: 100px;">
                <div style="height:50%;width:70%;margin-top:-30px;">
						<canvas id="line_chart"></canvas>	
					</div>
                <hr style="margin-top:-100px;margin-bottom: 100px;">
			<div id="word_cloud" style="height:50%;width:70%;margin-top:-30px;">
	
				</div>
            </div>
            </div>
            </div>
            </div>
        </section>
        <section id="login" class="animate-bottom" style="display: none;" >
            <div class='jumbotron'>
            <div class='container'>
            <div class='row'>
                <div class='col-md-12'>
                    <h1>使用者登入</h1>
                    <p>帳號：<input type="text" style="margin-top:20px;height: 50px; width:75%;font-size:30px;" v-model="account_input"></p>
                    <p>密碼：<input type="text" style="margin-top:20px;height: 50px; width:75%;font-size:30px;" v-model="password_input"></p>
                    <div style="display:flex; flex-direction:column; justify-content:center;" >
				        <button type="button" style="margin-top:30px; height:50px; width:125px; border: 1px solid; border-radius:25px; background-color:white;" @click="login_btn" onclick="search()">登入</button>
                    </div>
                </div>
            </div>
            </div>
            </div>
        </section>
        <section id="register" class="animate-bottom" style="display: none" >
            <div class='jumbotron'>
            <div class='container'>
            <div class='row'>
                <div class='col-md-12'>
                    <div style="display:flex; flex-direction:column; justify-content:center;" >
                        <h1>使用者註冊</h1>
                        <p>帳號：<input type="text" style="margin-top:20px;height: 50px; width:75%;font-size:30px;" v-model="account_input"></p>
                        <p>密碼：<input type="text" style="margin-top:20px;height: 50px; width:75%;font-size:30px;" v-model="password_input"></p>
                        <p style="margin-left:-30px;">電子信箱：<input type="text" style="margin-top:20px;height: 50px; width:75%;font-size:30px;" v-model="email_input"></p>
                        <div style="display:flex; flex-direction:column; justify-content:center;" >
				        <button type="button" style="margin-top:30px; height:50px; width:125px; border: 1px solid; border-radius:25px; background-color:white;" @click="register_btn" onclick="search()">註冊</button>
                    </div>
                </div>
            </div>
            </div>
            </div>
            </div>
        </section>
        <section id="collection" class="animate-bottom" style="display: none" >
            <div class='jumbotron'>
            <div class='container'>
            <div class='row'>
                <div class='col-md-12'>
                    <h1>{{account_input}}的收藏列表</h1>
                    <div style="display:flex; flex-direction:column;border:1px solid black;height:70vh;width:150vh" >
                        <h4 style="margin-top: 10px;">小燈泡事件</h4>
                    </div>
                </div>
            </div>
            </div>
            </div>
        </section>
        <section id="news" class="animate-bottom" style="display: none" >
            <div class='jumbotron'>
            <div class='container'>
            <div class='row'>
                <div class='col-md-12'>
                    <h1 style="margin-top: -500px">最新消息</h1>
                    <hr style="border:2px dashed #534B52;">
                    <div style="display:flex; flex-direction:column;height:70vh;width:150vh" v-html="news_text">
                    </div>
                </div>
            </div>
            </div>
            </div>
        </section>
        

        </div>
    </div>
    </div>
    </div>
</body>
    <script type="module">
        const api_url = "https://localhost:61521/api/";
        var token = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJKd3RBdXRoRGVtbyIsInN1YiI6IjEwMDAwIiwidW5pcXVlX25hbWUiOiIxMDAwMCIsIm5hbWVpZCI6IjEwMDAwIiwibmFtZSI6IjEwMDAwIiwiZXhwIjoxNjg5MzMyMTg3LCJqdGkiOiI2ZTdhYWZiMy1iN2VhLTRmNjQtYWUxMC1kZjlkYWZkMjk2ZjgiLCJyb2xlIjoiVXNlcnMiLCJuYmYiOjE2ODkzMzAzODcsImlhdCI6MTY4OTMzMDM4N30.XIe8-EQOVJ5EKLsWrYzFITIUmFcLLsDBaT9GHi-mPCc";
        import chart from "./js/chart.js";
        import search from "./js/search.js";
        import news from "./js/news.js";
        import login from "./js/login.js";
        import logout from "./js/logout.js";
        
        Vue.createApp({
            data(){
                return{
                    search_input:{  "topic": "",
                                    "startDate": "",
                                    "endDate": ""},
                    recommend_info:"推薦",
                    account_input:"",
                    password_input:"",
                    email_input:"",
                    result_text:[],
                    news_text:""
                }
            },
            methods:{
//                get_data() {
//                    fetch(api_url + "Member")
//                    .then((response) => {
//                        return response.json();
//                    })
//                    .then((response) => {
//                        this.result_text = response;
//                        console.log(response);
//                    })
//                    .catch((error) => {
//                        console.log(error);
//                    })
//                },
                search_btn(){
                    this.search_input = {
                        "topic": document.getElementById("search_box").value,
                        "startDate": document.getElementById("search_start").value,
                        "endDate": document.getElementById("search_end").value
                    };
                    search.search_btn(this.search_input.topic,this.search_input.startDate,this.search_input.endDate,chart,api_url,token); 
                },
                
                async login_btn(){
                    var login_info = await login.login_btn(api_url,this.account_input,this.password_input);
                    if(!login_info.bool){
                        this.account_input = "";
                        this.password_input = "";
                    }
                    else{
                        token = login_info.response;
                    }
                },
                logout_btn(){
                    logout.logout_btn();
                    this.account_input = "";
                    this.password_input = "";
                },
                
                register_btn(){
                    var s = this.email_input;
                    document.getElementById("register").style.display = 'none';
                    setTimeout(function(){
                            document.getElementById("search").style.display = 'block';
                            alert(s + "註冊成功，請再次登入!!");
                    }, 3000);     
                },
                collect_btn(){
                    
                },
                news_btn(){
                    this.news_text = "";
                    var news_box = ["小燈泡事件","ABD"];
                    this.news_text = news.news(news_box);
                },
        },
        mounted: function(){
        
        }, 
    }).mount('#all_body');
    </script>
</html>